var MongoRepository = require('mongorepository').Repository;

var P2PVlanServicesViewStore = function(){
	connectionString = process.env.VIEW_STORE_CONNECTION_STRING;
	var servicesViewStoreRepository = new MongoRepository(connectionString,'services-p2pvlan');
	
	function getAll(companyAsn, callback){
		query = {'customer_asn': companyAsn}
		servicesViewStoreRepository.find(query, function(results){
			callback(results);
		});
	}

	function get(reference, callback){
		query = {'_id': reference}
		servicesViewStoreRepository.find(query, function(results){
			callback(results);
		});
	}
	

	return {
		getAll:getAll,
		get : get
	};
};

module.exports = P2PVlanServicesViewStore;