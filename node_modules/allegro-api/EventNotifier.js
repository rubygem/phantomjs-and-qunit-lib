var restify = require('restify'),
	gateway = restify.createJsonClient({
		url: process.env.GATEWAY_URI,
		version: '*'
	});

EventNotifier = function(){
		var raise = function(eventType,message,callback){
			var allegroEvent = {
				event_type: eventType,
				message: message
			};
			gateway.post('/command', { auth_token: 'test', allegro_event: allegroEvent }, function(err, req, res, obj) {
				callback();
			});	
		};	

	return {
		raise : raise
	};
};

module.exports = EventNotifier;