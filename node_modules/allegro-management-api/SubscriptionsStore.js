var _ = require('underscore'),
	MongoRepository = require('mongorepository').Repository;	

var SubscriptionsStore = function(){
	var subscriptionsStoreRepository = new MongoRepository(process.env.DATA_STORE_CONNECTION_STRING,'subscriptions'),
		dataCentreViewStoreRepository = new MongoRepository(process.env.DATA_STORE_CONNECTION_STRING,'view-store-subscriptions');

	function add(subscription,callback){
		subscriptionsStoreRepository.add(subscription, callback);
	}

	function remove(subscription,callback){
		subscriptionsStoreRepository.remove(subscription,callback);
	}

	function all(callback){
		var query = {};
		subscriptionsStoreRepository.find(query, function(subscriptions){
			callback(subscriptions);
		});
	}

	return {
		add:add,
		all:all,
		remove:remove
	};
};

module.exports = SubscriptionsStore;