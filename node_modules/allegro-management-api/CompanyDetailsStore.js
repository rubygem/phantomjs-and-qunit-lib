var MongoRepository = require('mongorepository').Repository;

var CompanyDetailsViewStore = function(){
        var companyDetailsViewRepository = new MongoRepository(process.env.VIEW_STORE_CONNECTION_STRING,'company-details');
        var companyDetailsDataRepository = new MongoRepository(process.env.DATA_STORE_CONNECTION_STRING,'company-details');

        function all(callback){
                companyDetailsViewRepository.find({},callback);
        }

        function add(company, callback){
                companyDetailsViewRepository.add(company,function(){
                        companyDetailsDataRepository.add(company,callback);
                });
        }
        
        return{
                all: all,
                add : add
        };
};

module.exports = CompanyDetailsViewStore;