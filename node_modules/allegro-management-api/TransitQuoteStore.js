var MongoRepository = require('mongorepository').Repository;
var _ = require('underscore'),
	quoteRepository = new MongoRepository(process.env.VIEW_STORE_CONNECTION_STRING,'quotes-transit');


var TransitQuoteStore = function(){

	function add(quote,callback){
		quoteRepository.add(quote, callback);
	}
	
	var findByDate = function(date, callback){
		var query = {"issued_on": date, "company_name": {$not: /Allegro/}};
		quoteRepository.find(query, function(results){
			callback(results);
		});
	};

	return{
		findByDate : findByDate,
		add : add
	};
};

module.exports = TransitQuoteStore;