var MongoRepository = require('mongorepository').Repository;
var _ = require('underscore'),
	portRepository = new MongoRepository(process.env.DATA_STORE_CONNECTION_STRING,'ports-transit');


var TransitPortStore = function(){

	function all(callback){
		portRepository.find({}, function(results){
			callback(results);
		});
	}
	
	function find(portName, callback){
		portRepository.find({"name": portName}, function(results){
			callback(results[0]);
		});
	}
	
	function findByProvider(providerName, callback){
		var query = {"transit_provider": providerName};
		portRepository.find(query, function(results){
			callback(results[0]);
		});
	}

	return{
		all : all,
		find: find,
		findByProvider: findByProvider
	};
};

module.exports = TransitPortStore;